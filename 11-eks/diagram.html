<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>11 - AWS EKS Voting Application</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <link rel="stylesheet" href="../shared/styles.css">
    <script src="diagram.js"></script>
    <script src="terraform-diagram.js"></script>
    <script src="../shared/diagram.js"></script>
</head>
<body>
    <div class="container difficulty-advanced">
        <div class="navigation">
            <div>
                <a href="../10-voting-app-deployment/diagram.html" class="nav-btn">‚Üê Project 10</a>
            </div>
            <div>
                <a href="../index.html" class="nav-btn projects">üìã Projects</a>
            </div>
            <div></div>
        </div>
        
        <div class="header">
            <h1>‚òÅÔ∏è Project 11: AWS EKS Voting Application</h1>
            <span class="complexity">Advanced</span>
            <p>Cloud-native deployment using AWS EKS with Terraform infrastructure and LoadBalancer services</p>
        </div>

        <div class="content">
            <div class="diagram-section">
                <div class="diagram-header">
                    <h2>Architecture Diagrams</h2>
                    <div class="diagram-tabs">
                        <button class="tab-btn active" onclick="showDiagram('kubernetes')" id="k8s-tab">Kubernetes Application</button>
                        <button class="tab-btn" onclick="showDiagram('terraform')" id="tf-tab">Terraform Infrastructure</button>
                    </div>
                    <div class="zoom-controls">
                        <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">+</button>
                        <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">-</button>
                        <button class="zoom-btn" onclick="resetZoom()" title="Reset Zoom">‚åÇ</button>
                        <button class="zoom-btn" onclick="fitToScreen()" title="Fit to Screen">‚ßâ</button>
                    </div>
                </div>
                <div id="mermaid-diagram">Loading diagram...</div>
            </div>

            <div class="info-panel">
                <div class="info-card">
                    <h3>üèóÔ∏è Infrastructure Components</h3>
                    <div class="component">
                        <strong>EKS Cluster:</strong> Managed Kubernetes cluster (example-voting-app, v1.33)
                    </div>
                    <div class="component">
                        <strong>Node Group:</strong> 2 worker nodes (demo-workers) in private subnets
                    </div>
                    <div class="component">
                        <strong>VPC:</strong> Multi-AZ setup with public/private subnets
                    </div>
                    <div class="component">
                        <strong>NAT Gateways:</strong> Outbound internet access for private subnets
                    </div>
                    <div class="component">
                        <strong>IAM Roles:</strong> EKS cluster and node group permissions
                    </div>
                </div>

                <div class="info-card">
                    <h3>üåê Application Services</h3>
                    <div class="component">
                        <strong>Vote Service:</strong> LoadBalancer for external voting access
                    </div>
                    <div class="component">
                        <strong>Result Service:</strong> LoadBalancer for external results viewing
                    </div>
                    <div class="component">
                        <strong>Redis Service:</strong> ClusterIP 6379 for internal cache access
                    </div>
                    <div class="component">
                        <strong>DB Service:</strong> ClusterIP 5432 for internal database access
                    </div>
                </div>

                <div class="info-card">
                    <h3>‚òÅÔ∏è Cloud-Native Benefits</h3>
                    <div class="cloud-feature">Managed Control Plane: AWS manages Kubernetes API server, etcd, and controllers</div>
                    <div class="cloud-feature">Auto-scaling: Node groups can automatically scale based on demand</div>
                    <div class="cloud-feature">Load Balancers: Automatic AWS ELB provisioning for LoadBalancer services</div>
                    <div class="cloud-feature">Security: IAM integration with Kubernetes RBAC</div>
                    <div class="cloud-feature">High Availability: Multi-AZ deployment across availability zones</div>
                </div>

                <div class="info-card">
                    <h3>üíª Technology Stack</h3>
                    <div class="tech-stack">
                        <span class="tech">AWS EKS</span>
                        <span class="tech">Terraform</span>
                        <span class="tech">Docker</span>
                        <span class="tech">Redis 7</span>
                        <span class="tech">PostgreSQL 15</span>
                        <span class="tech">LoadBalancer</span>
                        <span class="tech">VPC</span>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üìã Deployment Commands</h3>
                    <pre style="background: #2d3748; color: #e2e8f0; padding: 10px; border-radius: 5px; font-size: 0.8em;">
# Deploy infrastructure
cd terraform/
terraform init
terraform apply

# Configure kubectl
aws eks update-kubeconfig --region eu-central-1 --name example-voting-app

# Deploy application
cd ../k8s/
kubectl apply -f .

# Check EKS cluster
kubectl get nodes

# Get LoadBalancer URLs
kubectl get services vote result

# Scale deployments
kubectl scale deployment vote --replicas=3

# Cleanup
kubectl delete -f .
cd ../terraform/
terraform destroy</pre>
                </div>
            </div>
        </div>
    </div>
</body>
</html>